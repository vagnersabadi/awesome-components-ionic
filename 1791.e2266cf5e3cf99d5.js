"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1791],{1791:(M,d,u)=>{u.r(d),u.d(d,{TouchSwipePageModule:()=>P});var m=u(9808),w=u(3075),n=u(7674),c=u(7154),v=u(655),e=u(5e3);let S=(()=>{class i{constructor(t,s){this.gestureCtrl=t,this.el=s,this.debugMode=!1,this.tap=new e.vpe,this.doubleTap=new e.vpe,this.press=new e.vpe,this.swipe=new e.vpe,this.swipeEnd=new e.vpe,this.tapGesture={name:"tap",enabled:!1,interval:250},this.doubleTapGesture={name:"doubleTap",enabled:!1,interval:300},this.pressGesture={name:"press",enabled:!1,interval:251},this.swipeGesture={name:"swipe",enabled:!1,interval:250,threshold:15,reportInterval:void 0,direction:["right","left"]},this.DIRECTIVE_GESTURES=[this.tapGesture,this.doubleTapGesture,this.pressGesture,this.swipeGesture],this.GESTURE_CREATED=!1,this.lastTap=0,this.tapCount=0,this.tapTimeout=null,this.pressTimeout=null,this.isPressing=!1,this.moveTimeout=null,this.isMoving=!1,this.lastSwipeReport=null}ngOnInit(){this.initSetupGestures()}onPress(t){!this.pressGesture.enabled||this.handlePressing(t.type)}handleTaps(t){const s=Math.floor(t.timeStamp),o=this.lastTap+this.tapGesture.interval>s;if(!this.tapGesture.enabled&&!this.doubleTapGesture.enabled||this.isPressing||this.isMoving)return this.resetTaps();this.tapCount++,o&&this.doubleTapGesture.enabled?this.emitTaps():o||(this.tapTimeout=setTimeout(()=>this.emitTaps(),this.tapGesture.interval)),this.lastTap=s}initSetupGestures(){this.DIRECTIVE_GESTURES.filter(t=>{this.gestureOpts.find(s=>{t.name===s.name&&(t.enabled=!0,"swipe"===t.name?(this.swipeGesture.reportInterval=s.reportInterval||t.reportInterval,this.swipeGesture.direction=s.direction||t.direction,this.createGesture()):(t.interval=s.interval||t.interval,t.threshold=s.threshold||t.threshold))})})}handleMoving(t,s){null!==this.moveTimeout&&(clearTimeout(this.moveTimeout),this.moveTimeout=null);const o=s.deltaX,r=s.deltaY,T=Math.abs(o),g=Math.abs(r),h=this.swipeGesture.reportInterval||"live",p=this.swipeGesture.threshold;if(T<p&&g<p)return;const E=this.isMoving&&("start"===h&&null===this.lastSwipeReport||"live"===h||"end"===h&&"moveend"===t);if(this.lastSwipeReport=s.timeStamp,E){const l=Object.assign({dirX:void 0,dirY:void 0,swipeType:t},s);T>p&&(o>0?l.dirX="right":o<0&&(l.dirX="left")),g>p&&(r>0?l.dirY="down":r<0&&(l.dirY="up"));const f=this.swipeGesture.direction;(f.includes(l.dirX)||f.includes(l.dirY))&&(this.debugMode&&console.log("Swipe"),this.swipe.emit(l))}"moveend"===t&&null!==this.lastSwipeReport&&(this.isMoving=!1,this.lastSwipeReport=null,this.swipeEnd.emit())}handlePressing(t){"touchstart"===t?this.pressTimeout=setTimeout(()=>{this.isPressing=!0,this.debugMode&&console.log("PressStart"),this.press.emit("start")},this.pressGesture.interval):"touchend"===t&&(clearTimeout(this.pressTimeout),this.isPressing&&(this.debugMode&&console.log("PressEnd"),this.press.emit("end"),this.resetTaps()),setTimeout(()=>this.isPressing=!1,150))}createGesture(){this.GESTURE_CREATED||(this.gestureCtrl.create({gestureName:"socialGesture",el:this.el.nativeElement,onStart:()=>{this.swipeGesture.enabled&&(this.isMoving=!0,this.moveTimeout=setInterval(()=>{this.isMoving=!1},249))},onMove:s=>{this.swipeGesture.enabled&&this.handleMoving("moving",s)},onEnd:s=>{this.swipeGesture.enabled&&this.handleMoving("moveend",s)}},!0).enable(),this.GESTURE_CREATED=!0)}emitTaps(){1===this.tapCount&&this.tapGesture.enabled?(this.debugMode&&console.log("1 Tap "),this.tap.emit()):2===this.tapCount&&this.doubleTapGesture.enabled&&(this.debugMode&&console.log("2 Tap"),this.doubleTap.emit()),this.resetTaps()}resetTaps(){clearTimeout(this.tapTimeout),this.tapCount=0,this.tapTimeout=null,this.lastTap=0}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.TH),e.Y36(e.SBq))},i.\u0275dir=e.lG2({type:i,selectors:[["","appSocialGestures",""]],hostBindings:function(t,s){1&t&&e.NdJ("touchstart",function(r){return s.onPress(r)})("touchend",function(r){return s.onPress(r)})("click",function(r){return s.handleTaps(r)})},inputs:{gestureOpts:"gestureOpts",debugMode:"debugMode"},outputs:{tap:"tap",doubleTap:"doubleTap",press:"press",swipe:"swipe",swipeEnd:"swipeEnd"}}),i})();const b=[{path:"",component:(()=>{class i{constructor(t){this.toastController=t,this.gestureOptsTap=[{name:"tap"},{name:"doubleTap"}],this.gestureOptsPress=[{name:"press",interval:1500}],this.gestureOptsSwipe=[{name:"swipe",direction:["left","right"]}],this.direction=null}ngOnInit(){}onTap(){this.presentToast("Tap")}onDoubleTap(){this.presentToast("DoubleTap")}onPress(){this.presentToast("Long Press 1.5s")}onSwipe(t){this.direction=t.dirX}onMoveed(){this.presentToast("Swipe End "+this.direction)}presentToast(t){return(0,v.mG)(this,void 0,void 0,function*(){(yield this.toastController.create({message:t,duration:500})).present()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.yF))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-touch-swipe"]],decls:25,vars:3,consts:[["slot","start"],["defaultHref","/gestures"],["color","primary","appSocialGestures","","debugMode","true",3,"gestureOpts","tap","doubleTap"],["color","secondary","appSocialGestures","","debugMode","true",3,"gestureOpts","press"],["color","tertiary","appSocialGestures","","debugMode","true",3,"gestureOpts","swipe","swipeEnd"]],template:function(t,s){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e._UZ(3,"ion-back-button",1),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5,"Touch Swipe"),e.qZA()()(),e.TgZ(6,"ion-content")(7,"ion-card",2),e.NdJ("tap",function(){return s.onTap()})("doubleTap",function(){return s.onDoubleTap()}),e.TgZ(8,"ion-card-header")(9,"ion-card-subtitle"),e._uU(10,"Exemple 01"),e.qZA(),e.TgZ(11,"ion-card-title"),e._uU(12,"Tap and DoubleTap"),e.qZA()()(),e.TgZ(13,"ion-card",3),e.NdJ("press",function(){return s.onPress()}),e.TgZ(14,"ion-card-header")(15,"ion-card-subtitle"),e._uU(16,"Exemple 02"),e.qZA(),e.TgZ(17,"ion-card-title"),e._uU(18,"LongPress after 1.5 seconds"),e.qZA()()(),e.TgZ(19,"ion-card",4),e.NdJ("swipe",function(r){return s.onSwipe(r)})("swipeEnd",function(){return s.onMoveed()}),e.TgZ(20,"ion-card-header")(21,"ion-card-subtitle"),e._uU(22,"Exemple 03"),e.qZA(),e.TgZ(23,"ion-card-title"),e._uU(24,"Swipe Lefth Right"),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("gestureOpts",s.gestureOptsTap),e.xp6(6),e.Q6J("gestureOpts",s.gestureOptsPress),e.xp6(6),e.Q6J("gestureOpts",s.gestureOptsSwipe))},directives:[n.Gu,n.sr,n.Sm,n.oU,n.cs,n.wd,n.W2,n.PM,S,n.Zi,n.tO,n.Dq],styles:[""]}),i})()}];let G=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[c.Bz.forChild(b)],c.Bz]}),i})(),P=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,w.u5,n.Pc,G]]}),i})()}}]);