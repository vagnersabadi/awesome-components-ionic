!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{wAJi:function(t,i,n){"use strict";n.r(i),n.d(i,"TouchSwipePageModule",function(){return m});var r,o,a,u,p=n("ofXK"),l=n("3Pt+"),c=n("TEn/"),h=n("tyNb"),d=n("mrSG"),b=n("fXoL"),f=((r=function(){function t(s,i){e(this,t),this.gestureCtrl=s,this.el=i,this.debugMode=!1,this.tap=new b.p,this.doubleTap=new b.p,this.press=new b.p,this.swipe=new b.p,this.swipeEnd=new b.p,this.tapGesture={name:"tap",enabled:!1,interval:250},this.doubleTapGesture={name:"doubleTap",enabled:!1,interval:300},this.pressGesture={name:"press",enabled:!1,interval:251},this.swipeGesture={name:"swipe",enabled:!1,interval:250,threshold:15,reportInterval:void 0,direction:["right","left"]},this.DIRECTIVE_GESTURES=[this.tapGesture,this.doubleTapGesture,this.pressGesture,this.swipeGesture],this.GESTURE_CREATED=!1,this.lastTap=0,this.tapCount=0,this.tapTimeout=null,this.pressTimeout=null,this.isPressing=!1,this.moveTimeout=null,this.isMoving=!1,this.lastSwipeReport=null}return s(t,[{key:"ngOnInit",value:function(){this.initSetupGestures()}},{key:"onPress",value:function(e){this.pressGesture.enabled&&this.handlePressing(e.type)}},{key:"handleTaps",value:function(e){var t=this,s=Math.floor(e.timeStamp),i=this.lastTap+this.tapGesture.interval>s;if(!this.tapGesture.enabled&&!this.doubleTapGesture.enabled||this.isPressing||this.isMoving)return this.resetTaps();this.tapCount++,i&&this.doubleTapGesture.enabled?this.emitTaps():i||(this.tapTimeout=setTimeout(function(){return t.emitTaps()},this.tapGesture.interval)),this.lastTap=s}},{key:"initSetupGestures",value:function(){var e=this;this.DIRECTIVE_GESTURES.filter(function(t){e.gestureOpts.find(function(s){t.name===s.name&&(t.enabled=!0,"swipe"===t.name?(e.swipeGesture.reportInterval=s.reportInterval||t.reportInterval,e.swipeGesture.direction=s.direction||t.direction,e.createGesture()):(t.interval=s.interval||t.interval,t.threshold=s.threshold||t.threshold))})})}},{key:"handleMoving",value:function(e,t){null!==this.moveTimeout&&(clearTimeout(this.moveTimeout),this.moveTimeout=null);var s=t.deltaX,i=t.deltaY,n=Math.abs(s),r=Math.abs(i),o=this.swipeGesture.reportInterval||"live",a=this.swipeGesture.threshold;if(!(n<a&&r<a)){var u=this.isMoving&&("start"===o&&null===this.lastSwipeReport||"live"===o||"end"===o&&"moveend"===e);if(this.lastSwipeReport=t.timeStamp,u){var p=Object.assign({dirX:void 0,dirY:void 0,swipeType:e},t);n>a&&(s>0?p.dirX="right":s<0&&(p.dirX="left")),r>a&&(i>0?p.dirY="down":i<0&&(p.dirY="up"));var l=this.swipeGesture.direction;(l.includes(p.dirX)||l.includes(p.dirY))&&(this.debugMode&&console.log("Swipe"),this.swipe.emit(p))}"moveend"===e&&null!==this.lastSwipeReport&&(this.isMoving=!1,this.lastSwipeReport=null,this.swipeEnd.emit())}}},{key:"handlePressing",value:function(e){var t=this;"touchstart"===e?this.pressTimeout=setTimeout(function(){t.isPressing=!0,t.debugMode&&console.log("PressStart"),t.press.emit("start")},this.pressGesture.interval):"touchend"===e&&(clearTimeout(this.pressTimeout),this.isPressing&&(this.debugMode&&console.log("PressEnd"),this.press.emit("end"),this.resetTaps()),setTimeout(function(){return t.isPressing=!1},150))}},{key:"createGesture",value:function(){var e=this;this.GESTURE_CREATED||(this.gestureCtrl.create({gestureName:"socialGesture",el:this.el.nativeElement,onStart:function(){e.swipeGesture.enabled&&(e.isMoving=!0,e.moveTimeout=setInterval(function(){e.isMoving=!1},249))},onMove:function(t){e.swipeGesture.enabled&&e.handleMoving("moving",t)},onEnd:function(t){e.swipeGesture.enabled&&e.handleMoving("moveend",t)}},!0).enable(),this.GESTURE_CREATED=!0)}},{key:"emitTaps",value:function(){1===this.tapCount&&this.tapGesture.enabled?(this.debugMode&&console.log("1 Tap "),this.tap.emit()):2===this.tapCount&&this.doubleTapGesture.enabled&&(this.debugMode&&console.log("2 Tap"),this.doubleTap.emit()),this.resetTaps()}},{key:"resetTaps",value:function(){clearTimeout(this.tapTimeout),this.tapCount=0,this.tapTimeout=null,this.lastTap=0}}]),t}()).\u0275fac=function(e){return new(e||r)(b.Pb(c.e),b.Pb(b.m))},r.\u0275dir=b.Kb({type:r,selectors:[["","appSocialGestures",""]],hostBindings:function(e,t){1&e&&b.dc("touchstart",function(e){return t.onPress(e)})("touchend",function(e){return t.onPress(e)})("click",function(e){return t.handleTaps(e)})},inputs:{gestureOpts:"gestureOpts",debugMode:"debugMode"},outputs:{tap:"tap",doubleTap:"doubleTap",press:"press",swipe:"swipe",swipeEnd:"swipeEnd"}}),r),v=[{path:"",component:(o=function(){function t(s){e(this,t),this.toastController=s,this.gestureOptsTap=[{name:"tap"},{name:"doubleTap"}],this.gestureOptsPress=[{name:"press",interval:1500}],this.gestureOptsSwipe=[{name:"swipe",direction:["left","right"]}],this.direction=null}return s(t,[{key:"ngOnInit",value:function(){}},{key:"onTap",value:function(){this.presentToast("Tap")}},{key:"onDoubleTap",value:function(){this.presentToast("DoubleTap")}},{key:"onPress",value:function(){this.presentToast("Long Press 1.5s")}},{key:"onSwipe",value:function(e){this.direction=e.dirX}},{key:"onMoveed",value:function(){this.presentToast("Swipe End "+this.direction)}},{key:"presentToast",value:function(e){return Object(d.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:e,duration:500});case 2:t.sent.present();case 3:case"end":return t.stop()}},t,this)}))}}]),t}(),o.\u0275fac=function(e){return new(e||o)(b.Pb(c.zb))},o.\u0275cmp=b.Jb({type:o,selectors:[["app-touch-swipe"]],decls:25,vars:3,consts:[["slot","start"],["defaultHref","/gestures"],["color","primary","appSocialGestures","","debugMode","true",3,"gestureOpts","tap","doubleTap"],["color","secondary","appSocialGestures","","debugMode","true",3,"gestureOpts","press"],["color","tertiary","appSocialGestures","","debugMode","true",3,"gestureOpts","swipe","swipeEnd"]],template:function(e,t){1&e&&(b.Vb(0,"ion-header"),b.Vb(1,"ion-toolbar"),b.Vb(2,"ion-buttons",0),b.Qb(3,"ion-back-button",1),b.Ub(),b.Vb(4,"ion-title"),b.Lc(5,"Touch Swipe"),b.Ub(),b.Ub(),b.Ub(),b.Vb(6,"ion-content"),b.Vb(7,"ion-card",2),b.dc("tap",function(){return t.onTap()})("doubleTap",function(){return t.onDoubleTap()}),b.Vb(8,"ion-card-header"),b.Vb(9,"ion-card-subtitle"),b.Lc(10,"Exemple 01"),b.Ub(),b.Vb(11,"ion-card-title"),b.Lc(12,"Tap and DoubleTap"),b.Ub(),b.Ub(),b.Ub(),b.Vb(13,"ion-card",3),b.dc("press",function(){return t.onPress()}),b.Vb(14,"ion-card-header"),b.Vb(15,"ion-card-subtitle"),b.Lc(16,"Exemple 02"),b.Ub(),b.Vb(17,"ion-card-title"),b.Lc(18,"LongPress after 1.5 seconds"),b.Ub(),b.Ub(),b.Ub(),b.Vb(19,"ion-card",4),b.dc("swipe",function(e){return t.onSwipe(e)})("swipeEnd",function(){return t.onMoveed()}),b.Vb(20,"ion-card-header"),b.Vb(21,"ion-card-subtitle"),b.Lc(22,"Exemple 03"),b.Ub(),b.Vb(23,"ion-card-title"),b.Lc(24,"Swipe Lefth Right"),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.Db(7),b.nc("gestureOpts",t.gestureOptsTap),b.Db(6),b.nc("gestureOpts",t.gestureOptsPress),b.Db(6),b.nc("gestureOpts",t.gestureOptsSwipe))},directives:[c.z,c.mb,c.l,c.h,c.i,c.kb,c.u,c.m,f,c.o,c.p,c.q],styles:[""]}),o)}],T=((u=function t(){e(this,t)}).\u0275fac=function(e){return new(e||u)},u.\u0275mod=b.Nb({type:u}),u.\u0275inj=b.Mb({imports:[[h.j.forChild(v)],h.j]}),u),m=((a=function t(){e(this,t)}).\u0275fac=function(e){return new(e||a)},a.\u0275mod=b.Nb({type:a}),a.\u0275inj=b.Mb({imports:[[p.c,l.h,c.nb,T]]}),a)}}])}();